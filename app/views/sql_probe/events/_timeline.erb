<div id="timeline"></div>
<% content_for :javascript do %>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script>
(function(){
  google.charts.load('current', {'packages':['timeline']});
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    var container = document.getElementById('timeline');
    var chart = new google.visualization.Timeline(container);
    var dataTable = new google.visualization.DataTable();

    dataTable.addColumn({ type: 'string', id: 'Title' });
    dataTable.addColumn({ type: 'number', id: 'Start' });
    dataTable.addColumn({ type: 'number', id: 'End' });
    dataTable.addRows(<%= raw JSON.pretty_generate(data) %>);

    var options = {
      // @see http://stackoverflow.com/a/18643370/613772
      // 42 is the magic number
      height: (<%= data.group_by{|a,| a}.size %> * 42) + 40
    };

    chart.draw(dataTable, options);
  }
})();
</script>
<% end %> 

